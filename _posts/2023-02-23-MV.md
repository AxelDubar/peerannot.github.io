---
layout: post
title: Majority voting
category: [doc]
tags: [models,aggregation,MV]
permalink: /models/MV/
css:
  badge: true
  syntax: true
  custom: >-
    table { font-size: .95rem; margin-bottom: 1.5rem; }
    tr:nth-child(odd) { backgroud-color: #e3edf3; }
    th, td { padding: .5em; }
    .box { border: 1px solid #e3edf3; padding: 1rem; }
    .plaintext { color: mediumseagreen; }
excerpt: Models available in peerannot
featured: false
# image:
#    path: /assets/images/settings-3311592.svg
---

## Model

The Majority voting model returns the most voted label for each task:

$$\hat y_i = \arg\max_{\ell\in[K]} \sum_{j\in [n_{worker}]} \mathbf{1}_{\{y_i^{(j)}=\ell\}}.$$


## CLI
With `peerannot` in a terminal located in the directory of answers, the DS model can be used as follows.

```bash
peerannnot aggregate . --strategy MV --answers-file DSanswers.json
```

Note that by default, if the answers are in a file names `answers.json` the `--answers-file` argument can be omitted.

## API

Import the aggregation model in the current session

```python
from peerannot.models import MV
```

Assuming the answers are in a dictionary names `answers` then run:

```python
mv = MV(answers, n_classes)
yhat = mv.get_answers()
```

Note that the majority voting aggregation produces hard labels (Dirac distributions).


## API details: class models.MV
MV model class herits from `CrowdModel`

---
`__init__(answers, n_classes,**kwargs)`

Parameters:
- `answers`:*(dict)*
  Dictionnary of workers answers with format
```json

            {
                task0: {worker0: label, worker1: label},
                task1: {worker1: label}
            }
```
- `n_classes`: *(int)*
  Number of possible classes
- `kwargs`: *(dict)*
  Dictionnary that can contain `path_remove` to remove tasks identified from the [`WAUM`]() or another method.

---
`compute_baseline()`

For each given task, computes the number of votes for each label.

---
`get_answers()`

Returns the most voted class from the `baseline`. In case of equalities, a random choice is applied.
